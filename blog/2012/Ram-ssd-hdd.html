<!DOCTYPE html><html lang="ru"><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1" name="viewport" /><title>Тестируем RAM, SSD и HDD на скорость</title><meta name="description" /><meta name="keywords" /><link href="../../favicon.png?1353183819" rel="icon" type="image/png" /><link href="../../stylesheets/main.css?1353748817" media="screen" rel="stylesheet" type="text/css" /><script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
<script src="../../javascripts/core.js?1353101486" type="text/javascript"></script></head><body><div id="container"><div id="header"><div class="logo"><a href="/"><img src="/images/logo_hover.png" /><img class="overlay" src="/images/logo.png" /></a></div><div class="about"><h1><a href="/">artemeff</a> &mdash; Ruby on Rails developer</h1><span>Программы должны быть написаны так, чтобы их могли читать люди, и лишь иногда так, чтобы их могли выполнять машины.</span></div><div class="navigation"><a href="/">Главная</a><br /><a href="/projects.html">Проекты</a><br /><a href="/contacts.html">Контакты</a><br /><a href="/about_me.html">Кто такой?</a></div></div><div class="line"></div><div id="main"><div class="posts"><div class="post"><div class="meta">Ноябрь 24, 2012<p><a href="#comments">комментарии</a></p><ul class="tags"><li><a href="/tags/ram.html">ram</a></li><li><a href="/tags/ssd.html">ssd</a></li><li><a href="/tags/hdd.html">hdd</a></li><li><a href="/tags/server-side.html">server-side</a></li><li><a href="/tags/rails.html">rails</a></li></ul></div><div class="article"><h1 class="title">Тестируем RAM, SSD и HDD на скорость</h1><p>Сейчас я потихньку занимаюсь своим проектом, когда есть свободное время, и вот недавно выпал вопрос о железе для хостинга. Облака я рассматривать пока не буду, т.к. железки там сказать в принципе не смогут, только если везде стоят одни и те-же. Кстати, скоро ко мне попадет в руки тестовый аккаунт на новой облачной площадке, там и потестирую что и как быстро работает. А сейчас я хочу рассказать о производительности SSD vs <a href='http://ru.wikipedia.org/wiki/RAM_drive'>RAM Drive</a> vs HDD.</p>

<p>Тесты проводились на компьютере с OS X, 4x4Gb Kingston @ 1333 RAM, Intel Core i3 @ 2.8 Ghz, OCZ Vertex3 @ 120Gb, HDD Seagate ST3000DM001 @ 3Tb. OS X, конечно же, установлена на SSD, Ruby с гемами расположены в домашней папке. Я создал Rails приложение, создал 10.000 записей в sqlite и контроллер со следующим кодом:</p>

<pre><code>@products = Product.all
Rails.cache.clear</code></pre>

<p>Кстати, записи на странице не рендерил, подумал что это будет лишним.</p>

<p>Дальше связка nginx + unicorn и тестирование нагрузки. Сначала хотел использовать siege, но что-то там не срослось, давно уже было, не помню :) И таки взял ab.</p>

<p>Результаты получились очень странными:</p>

<h2 id='hdd'>HDD</h2>

<pre><code>Document Length:      719 bytes
Concurrency Level:    4
Time taken for tests: 40.510 seconds
Complete requests:    100
Failed requests:      0
Total transferred:    130600 bytes
HTML transferred:     71900 bytes
Requests per second:  2468.54
Transfer rate:        3223.92 kb/s received
            Connnection Times (ms)
            min     avg     max
Connect:    0       0       0
Processing: 1193    1596    2400
Total:      1193    1596    2400</code></pre>

<h2 id='ram_disk'>RAM disk</h2>

<pre><code>Document Length:      719 bytes
Concurrency Level:    4
Time taken for tests: 39.272 seconds
Complete requests:    100
Failed requests:      0
Total transferred:    130600 bytes
HTML transferred:     71900 bytes
Requests per second:  2546.33
Transfer rate:        3325.51 kb/s received
            Connnection Times (ms)
            min     avg     max
Connect:    0       0       0
Processing: 366     1546    1645
Total:      366     1546    1645</code></pre>

<h2 id='ssd'>SSD</h2>

<pre><code>Document Length:      719 bytes
Concurrency Level:    4
Time taken for tests: 39.274 seconds
Complete requests:    100
Failed requests:      0
Total transferred:    130600 bytes
HTML transferred:     71900 bytes
Requests per second:  2546.21
Transfer rate:        3325.35 kb/s received
            Connnection Times (ms)
            min     avg     max
Connect:    0       0       0
Processing: 398     1546    1627
Total:      398     1546    1627</code></pre>

<p>И для удобства:</p>

<pre><code>            Connnection Times (ms)  RPS
            min     avg     max
HDD:        1193    1596    2400    2468.54
RAM Disk:   366     1546    1645    2546.33
SSD: 398    398     1546    1627    2546.21</code></pre>

<p>В следующий раз буду проводить тест SSD vs RAM disk уже на серверной машине, и Ruby с гемами положу в оперативную память, когда буду ее тестировать, а то сейчас, как мне кажется, у RAM не сильный выигрышь просто потому что сам руби был на SSD.</p>

<p>Ну и в следующий раз постараюсь с графиками, а то голые цифры мне совсем не нравятся.</p></div></div><div class="post comments" id="comments"><div class="meta"><h6>Комментарии</h6></div><div class="article"><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'artemeff';

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">>comments powered by Disqus.</a></noscript></div></div></div><div class="slider"><a href="/blog/2012/Blog-updates.html" title="Обновление бложика">« назад</a></div></div></div><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-27383670-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>