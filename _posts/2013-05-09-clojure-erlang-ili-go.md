---
layout:     post
title:      Clojure, Erlang или Go?
date:       2013-05-09
---

В начале года я начал интересоваться другими языками, в мой арсенал был нужен монстр, который будет быстро обрабатывать огромное количество данных. В поле зрения попали Clojure, Erlang и Go. Все три языка я изучил очень и очень поверхностно, но уже мог что-то 'написать'.

Даже [твит оставил](https://twitter.com/artemeff/status/332404876132880384), ждал помощи от комьюнити в выборе языка. За задачей [далеко ходить не надо](http://artemeff.com/blog/2-Go-and-sockets). Сейчас она решена с помощью NodeJS, тянет за собой 37 Кб кода для клиента и поддерживает fallback для веб сокетов. Проект не ориентирован на корпоративного клиента, потому старых браузеров будет очень мало, да и режим реального времени скорее как дополнительный функционал, если его не будет – не критично.

Для решения поставленной задачи в языке должны быть следующие библиотеки:

* WebSocket
* TCP (Unix) Socket
* Redis

Задача простая:

* Поддержка каналов: подписаться/отписаться/отправить сообщение
* Коллбеки на подключение/отключение клиента у вебсокетов
* В Редисе храним состояние пользователя онлайн/оффлайн

Реализовать это на NodeJS не составило труда, написал около 300 строк кода, использовал [SockJS](https://github.com/sockjs/sockjs-node) и [websocket-multiplex](https://github.com/sockjs/websocket-multiplex/blob/master/multiplex_server.js) для поддержки каналов.

Каждый из языков я изучал поверхностно, мог писать только с открытой документацией, примерно как script kiddie у кулхацкеров. Старался изучить не только язык, но и его философию, комьюнити, сторонние библиотеки. Я хочу поведать свое мнение о каждом из этих ЯП, вдруг это поможет мне определиться и будет полезным моему читателю. Писанина ниже не претендует на правильность, это лишь мои знания, буду рад за наставление на путь истинный.

# Go

Иногда кажется что это компилируемый Python, язык сам по себе очень простой, необходимые библиотеки есть, его разрабатывают крутые ребята, уже используется в продакшне, а еще он компилируется в привычный бинарник, который работает почти везде.

Чтиво:

* [Как мы перешли с 30 серверов на 2: Go](http://habrahabr.ru/post/172795/)
* [Go for IT. Часть первая](habrahabr.ru/post/141426/)
* [Go for IT. Часть вторая](http://habrahabr.ru/post/141494/)

# Erlang

Поддерживает [модель акторов](http://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C_%D0%B0%D0%BA%D1%82%D0%BE%D1%80%D0%BE%D0%B2). «Программист не может написать идеальную программу» – философия процессов в Эрланге, следуя ей нам не надо отлавливать ошибки, если процесс завершился с ошибкой – мы плюем на это и забываем или перезапускаем процесс.

Хорошие статьи об Эрланге:

* [Почему Erlang?](http://habrahabr.ru/post/179053/)
* [Знакомимся с Erlang – языком программирования для распределенных систем](http://www.xakep.ru/magazine/xa/118/110/1.asp)
* [Начала работы с Erlang](http://www.k-press.ru/cs/2006/3/erlang/erlang.asp)
* [Erlanger wiki](http://erlanger.ru/wiki/index.php/%D0%97%D0%B0%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D0%B0%D1%8F_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0)

# Clojure

Sexp – это круто, почему все его избегают? Это не точки и не запятые в Эрланге, скобочки делают код более выразительным и понятным, но к ним надо привыкнуть. Одно меня спугнуло – количество библиотек, их много, но почти все мертвы. Есть звезды типа Aleph или Ring, но первый тянет за собой кучу зависимостей, а второй не покрывает все требования поставленной задачи. Я очень долго искал рецепт для TCP сервера, в итоге в своей 'софтине' остановился на Aleph и теперь мне приходится ждать около 2-3 секунд перед запуском программы (там, видимо, много кода).

Почитать о языке:

* [Почему стоит изучить Clojure?](http://habrahabr.ru/post/173071/)

# Заключение

Сам больше склоняюсь к Go, он простой и Google. Clojure – красивый, функциональный, но еще развивается, в будущем обязательно возьмусь за него. Erlang под вопросом, язык мне понравился, нравится его работа с процессами (акторами).

А теперь я призываю вас к обсуждению, я с радостью выслушаю мнения разработчиков на этих языках, это поможет мне с выбором. Спасибо :)
